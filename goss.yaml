# See: https://github.com/goss-org/goss/blob/master/docs/gossfile.md

command:
  # ensure atlantis is available
  atlantis-available:
    exec: "atlantis version"
    exit-status: 0
    stdout: []
    stderr: []

  # ensure conftest is available
  conftest-available:
    exec: "conftest -v"
    exit-status: 0
    stdout: []
    stderr: []

  # ensure git-lfs is available
  git-lfs-available:
    exec: "git-lfs -v"
    exit-status: 0
    stdout: []
    stderr: []

{{if eq .Env.EXPECT_TERRAFORM "true"}}
  # ensure terraform is available
  terraform-available:
    exec: "terraform version"
    exit-status: 0
    stdout: []
    stderr: []
{{end}}

{{if eq .Env.EXPECT_TOFU "true"}}
  # ensure tofu binary is available
  tofu-available:
    exec: "tofu version"
    exit-status: 0
    stdout: []
    stderr: []
{{end}}
